<app-sidebar></app-sidebar>

<!-- Page title-->
<div class="border-bottom pt-5 mt-2 mb-5">
    <h1 class="mt-2 mt-md-4 mb-3 pt-5">Reseñas</h1>
    <div class="d-flex flex-wrap flex-md-nowrap justify-content-between">
      <p class="text-muted"></p>
      <p class="font-size-sm font-weight-medium pl-md-4">
        <a class="text-nowrap" [routerLink]="['/panel/productos']">Regresar<i class="cxi-angle-right font-size-base align-middle ml-1"></i></a>
      </p>
    </div>
  </div>

  <div class="card box-shadow-sm">
        <div class="card-header">
            <h5 style="margin-bottom: 0px;">Reseñas de {{producto.titulo}}</h5>
        </div>
        <div class="card-body">
            <div class="col-8">
                <div class="row">
                    <div class="row mb-5">
                        <div class="col-md-4" style="padding-right: 0px;">
                            <img [src]="url + '' + producto.portada" class="img-thumbnail rounded-0" alt="Portada" style="max-width: 180px;">
                        </div>
                        <div class="col-md-8" style="padding-left: 9%;">
                            <div class="card" style="height: 100% !important ;background: #f5eeee;">
                                <div class="card-body ">
                                    <h3 class="card-product-title text-truncate mb-2">
                                        <a class="nav-link mb-3">{{producto.titulo}}</a>
                                        <p class="text-muted"></p>
                                        <div class="d-flex align-items-center">
                                            <span class="h5 d-inline-block mb-0 text-danger">${{producto.precio}}</span>
                                        </div>
                                    </h3>
                                </div>
                            </div>
                        </div>
        
                    </div>
                </div>
            </div>

            <div class="col-lg-10 col-md-10 mb-md-0 mb-5">
                <!-- Reviews List -->
                <div class="border-top pt-4">
                    <div *ngIf="reviews.length === 0">
                        <h1 class="text-center" style="font-size: 1.5em;">Este producto aún no tiene reseñas.</h1>
                    </div>
                    <div *ngIf="reviews.length > 0">
                        <div *ngFor="let review of reviews | slice: (page-1) * pageSize : page * pageSize" class="mb-4 pb-4 border-bottom">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <div>
                                    <h6 class="mb-0">{{review.nombres}} {{review.apellidos}}</h6>
                                    <span class="font-size-sm text-muted">{{review.createdat | date:'mediumDate'}}</span>
                                </div>
                                <div class="star-rating">
                                    <ng-container *ngFor="let star of [1,2,3,4,5]">
                                        <i class="sr-star" [class.cxi-star-filled]="star <= review.estrellas" 
                                           [class.cxi-star]="star > review.estrellas"
                                           [class.active]="star <= review.estrellas"></i>
                                    </ng-container>
                                </div>
                            </div>
                            <p class="mb-0">{{review.comentario}}</p>
                        </div>
                        <div class="col-12">
                            <ngb-pagination
                                [(page)]="page"
                                [pageSize]="pageSize"
                                [collectionSize]="reviews.length">
                            </ngb-pagination>
                        </div>
                    </div>
                </div>
            </div>
        </div>
  </div>